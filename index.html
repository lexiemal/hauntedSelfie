<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
      body {
        margin: 0;
        background: black;
        overflow: hidden;
      }
      video {
        width: 100vw;
        height: 100vh;
        object-fit: cover;
        transform: scaleX(-1); /* mirror selfie view */
      }
      .flash {
        position: fixed;
        top: 0; left: 0;
        width: 100vw;
        height: 100vh;
        background: white;
        opacity: 0;
        transition: opacity 0.1s;
        pointer-events: none;
      }
      .hud {
        position: fixed;
        top: 10px;
        left: 10px;
        display: flex;
        align-times: center;
        gap: 10px;
        font-family: sans-serif;
        color: white;
        font-size: 18px;
      }
      .rec-dot {
        width: 12px; 
        height: 12px;
        background: red;
        border-radius: 50%;
        animation: blink 1s infinite;
      }

      @keyframes blink{
        0%, 50%, 100% { opacity: 1; }
        25%, 75% { opacity: 0; }
      }

      button {
        background: rgba(255,255,255,0.2);
        border: 1px solid white;
        color: white;
        font-size: 14px;
        border-radius: 4px;
        padding: 4px 8px;
      }
    </style>
  </head>
  <body>
    <video id="camera" autoplay playsinline></video>
    <div class="flash" id="flash"></div>

    <!-- Interface elements -->
    <div class="hud">
      <div class="rec-dot"></div>
      <span id="counter">0</span>
      <button id="toggle">Stop</button>
    </div>
    
    <script>
      const video = document.getElementById('camera');
      const flash = document.getElementById('flash');
      const counterEl = document.getElementById('counter');
      const toggleBtn = document.getElementById('toggle');
      const shutter = new Audio('shuttersound.m4a');

      let count = 0;
      let isRunning = true;
      let interval;

      // Access the front camera
      navigator.mediaDevices.getUserMedia({ video: { facingMode: 'user' } })
        .then(stream => { video.srcObject = stream; })
        .catch(err => alert('Camera access needed to simulate selfie mode.'));

      //fake photo
      function fakePhoto() {
        if (!isRunning) return;
        count++;
        counterEl.textContent = count;

        shutter.currentTime = 0; //rewind
        shuttter.play(); //play sound
        
        flash.style.opacity = 1;
        setTimeout(() => flash.style.opacity = 0, 100);
      };

      //start interval
      interval = setInterval(fakePhoto, 3000);

      //button clicks
      toggleBtn.addEventListener('click', () => {
        isRunning = !isRunning;
        toggleBtn.textContent = isRunning ? 'Stop' : 'Start';
      });
    </script>
  </body>
</html>
